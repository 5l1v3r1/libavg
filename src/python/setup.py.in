import os
from distutils.core import setup
from distutils.command.build import build as _build

class MyBuild(_build):
    def run(self):
        _build.run(self)
        self.copy_file(os.path.join(os.path.dirname(__file__), os.path.pardir, 'wrapper', 'avg.so'),
                os.path.join(self.build_lib, 'libavg'))


setup(name='libavg',
    # TODO: version string
    version='${PACKAGE_VERSION}',
    package_dir={ '':  '${CMAKE_CURRENT_SOURCE_DIR}'},
    packages=['libavg', 'libavg.app', 'libavg.widget'],
    package_data={'libavg': ['data/*']},
    cmdclass={'build': MyBuild},
)
