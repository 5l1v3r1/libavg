import os
import glob
from distutils.core import setup
from distutils.command.build import build as _build

class MyBuild(_build):
    def run(self):
        _build.run(self)
        self.copy_file('${AVG_SO_LOCATION}', os.path.join(self.build_lib, 'libavg'))


setup(name='libavg',
    version='${AVG_VERSION_RELEASE}',
    package_dir={'':  '${CMAKE_CURRENT_SOURCE_DIR}'},
    packages=['libavg', 'libavg.app', 'libavg.widget'],
    package_data={'libavg': ['data/*']},
    cmdclass={'build': MyBuild},
    scripts=glob.glob('${CMAKE_CURRENT_SOURCE_DIR}/scripts/avg_*'),
)
